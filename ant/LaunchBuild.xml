<?xml version="1.0" encoding="UTF-8"?>
<!-- ====================================================================== 
     Aug 5, 2004 11:34:00 AM                                                        

     project    
     description
                   
     wugm                                                                
     ====================================================================== -->
<project name="UpdatableCuratorTool" default="run" basedir="..">
	<description>
		Copy all files needed to build the Reactome author tool by InstallAnywhere.
	</description>

	<!-- Defining a list of directory names to be used -->
	<property name="targetDir" value="${basedir}/../temp/curatorTool" />
	<property name="libDir" value="${basedir}/lib" />
	<property name="srcDir" value="${basedir}/src" />
	<property name="classDir" value="${basedir}/classes" />
	<property name="orgDir" value="${classDir}/org" />
	<property name="launchDir" value="${classDir}/launcher" />
	<property name="resourcesDir" value="${basedir}/resources" />
	<property name="imagesDir" value="${basedir}/images" />
	<property name="docsDir" value="${basedir}/docs" />
	<property name="docsImagesDir" value="${docsDir}/images" />

	<!-- Empty the direcotry. If nothing there, it should do nothing -->
	<target name="delete">
		<delete dir="${targetDir}" />
	</target>

	<!-- make a directory first. If it is there, it should do nothing -->
	<target name="mkdir" depends="delete">
		<mkdir dir="${targetDir}" /> 
	</target>

	<!-- path for including all jar files in library directory -->
	<path id="class.path">
		<fileset dir="${libDir}">
			<include name="**/*.jar" />
		</fileset>
	</path>

	<target name="clean">
		<delete dir="${classDir}"/>
	</target>

	<!-- compile source code in specified src directory -->
	<target name="compile" depends="clean">
		<mkdir dir="${classDir}" />
		<javac includeantruntime="false" srcdir="${srcDir}" destdir="${classDir}" >
			<classpath refid="class.path" />
		</javac>
	</target>

	<!-- copy all files to the target directory -->
	<target name="copy" depends="mkdir, compile">
		<copy todir="${targetDir}/org">
			<fileset dir="${orgDir}">
				<exclude name="reactome/**" />
			</fileset>
		</copy>
		<copy todir="${targetDir}/launcher">
			<fileset dir="${launchDir}" />
		</copy>
		<copy todir="${targetDir}/resources">
			<fileset dir="${resourcesDir}" >
				<exclude name="*.prop" />
				<exclude name="Timings.xml" />
			</fileset>
		</copy>
		<copy todir="${targetDir}/images">
			<fileset dir="${imagesDir}" />
		</copy>
		<copy todir="${targetDir}/docs">
			<fileset dir="${docsDir}" />
		</copy>
		<copy todir="${targetDir}/lib">
			<fileset dir="${libDir}">
				<exclude name="skin/themepack.zip" />
			</fileset>
		</copy>
	</target>

	<target name="run" depends="copy">
		<java dir="${targetDir}" classpath="${targetDir}" classname="launcher.Launcher" fork="true">
			<classpath>
				<fileset dir="lib">
					<include name="**/*.jar"/>
				</fileset>
			</classpath>
		</java>
	</target>
</project>